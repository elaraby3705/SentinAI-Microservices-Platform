<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentin-AI | Supply Chain Command</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body { background-color: #0f172a; font-family: 'Segoe UI', system-ui, sans-serif; color: #e2e8f0; }
        .card { border: 1px solid #1e293b; background-color: #1e293b; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card-header { background-color: #334155; border-bottom: 1px solid #475569; font-weight: 600; letter-spacing: 0.5px; }
        .btn-primary { background-color: #3b82f6; border: none; }
        .btn-primary:hover { background-color: #2563eb; }

        /* Table Styling for "Dealer List" Task */
        .table-custom { color: #cbd5e1; }
        .table-custom thead { background-color: #0f172a; color: #94a3b8; text-transform: uppercase; font-size: 0.85rem; }
        .table-custom tbody tr:hover { background-color: #334155; }
        .price-tag { color: #34d399; font-weight: bold; font-family: 'Courier New', monospace; }
        .status-badge { font-size: 0.75rem; padding: 4px 8px; border-radius: 4px; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-secondary mb-4">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <i class="fas fa-shield-alt text-primary me-2"></i>Sentin-AI <span class="badge bg-primary ms-2" style="font-size: 0.6em;">PRO</span>
        </a>
        <span class="text-muted small">Module: Procurement & Logistics</span>
    </div>
</nav>

<div class="container px-4">
    <div class="row mb-4">
        <div class="col-12">
            <h4 class="border-bottom border-secondary pb-2"><i class="fas fa-satellite-dish me-2"></i>Security Equipment Procurement</h4>
            <p class="text-muted small">Manage authorized dealers and hardware pricing for the security grid.</p>
        </div>
    </div>

    <div class="row g-4">

        <div class="col-lg-4">
            <div class="card h-100">
                <div class="card-header text-uppercase text-xs"><i class="fas fa-filter me-2"></i>Hardware Selection</div>
                <div class="card-body">
                    <label class="form-label text-info small mb-1">SELECT SECURITY PRODUCT</label>

                    <select class="form-select bg-dark text-light border-secondary mb-3 p-2" id="product-dropdown" onchange="fetchDealers()">
                        <option value="all" selected>-- Select Equipment --</option>
                        <option value="cam-night">üî≠ Night Vision Camera X1</option>
                        <option value="drone-patrol">üöÅ Autonomous Drone Scout</option>
                        <option value="sensor-bio">üß¨ Biometric Access Pad</option>
                    </select>

                    <div class="alert alert-dark border-secondary mt-3">
                        <small><i class="fas fa-info-circle text-primary me-1"></i> System linked to global vendor database.</small>
                    </div>

                    <button class="btn btn-outline-light w-100 mt-2" onclick="fetchDealers()">
                        <i class="fas fa-sync-alt me-2"></i>Refresh Suppliers
                    </button>
                </div>
            </div>
        </div>

        <div class="col-lg-8">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span><i class="fas fa-truck-loading me-2"></i>AUTHORIZED SUPPLIERS</span>
                    <span class="badge bg-secondary" id="dealer-count">0 Vendors Found</span>
                </div>
                <div class="card-body p-0">
                    <table class="table table-custom table-striped mb-0">
                        <thead>
                            <tr>
                                <th>Supplier (Dealer)</th>
                                <th>Location</th>
                                <th>Rating</th>
                                <th class="text-end">Unit Price</th>
                            </tr>
                        </thead>
                        <tbody id="dealer-list">
                            <tr><td colspan="4" class="text-center py-5 text-muted">Select a product to view suppliers...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // üß† MOCK DATABASE (Matches "Dealer Pricing" Microservice logic)
    const database = [
        { id: 1, dealer: "CyberDyne Systems", location: "California, USA", product: "Night Vision Camera X1", price: 1250, rating: "A+" },
        { id: 2, dealer: "Stark Industries", location: "New York, USA", product: "Autonomous Drone Scout", price: 45000, rating: "AAA" },
        { id: 3, dealer: "Wayne Ent.", location: "Gotham, NJ", product: "Night Vision Camera X1", price: 1300, rating: "A" },
        { id: 4, dealer: "Black Mesa", location: "New Mexico", product: "Biometric Access Pad", price: 850, rating: "B+" },
        { id: 5, dealer: "Aperture Science", location: "Michigan, USA", product: "Autonomous Drone Scout", price: 44500, rating: "A-" },
        { id: 6, dealer: "Umbrella Corp", location: "Raccoon City", product: "Biometric Access Pad", price: 800, rating: "B" },
        { id: 7, dealer: "Massive Dynamic", location: "Boston, MA", product: "Night Vision Camera X1", price: 1200, rating: "A+" }
    ];

    function fetchDealers() {
        const selected = document.getElementById('product-dropdown').value;
        const tbody = document.getElementById('dealer-list');
        const countBadge = document.getElementById('dealer-count');

        tbody.innerHTML = ''; // Clear table

        // Map selection to Product Name
        const productMap = {
            'cam-night': 'Night Vision Camera X1',
            'drone-patrol': 'Autonomous Drone Scout',
            'sensor-bio': 'Biometric Access Pad'
        };

        let results = [];

        // Logic for "Select All" vs "Select Specific"
        if (selected === 'all') {
            results = database; // Show everything
        } else {
            results = database.filter(item => item.product === productMap[selected]);
        }

        // Render Rows
        if(results.length === 0) {
            tbody.innerHTML = '<tr><td colspan="4" class="text-center py-4 text-muted">No suppliers found for this item.</td></tr>';
            countBadge.innerText = '0 Vendors';
            return;
        }

        results.forEach(item => {
            const row = `
            <tr>
                <td class="fw-bold"><i class="fas fa-building text-secondary me-2"></i>${item.dealer}</td>
                <td class="small text-muted">${item.location}</td>
                <td><span class="badge bg-dark border border-secondary">${item.rating}</span></td>
                <td class="text-end price-tag">$${item.price.toLocaleString()}</td>
            </tr>
            `;
            tbody.innerHTML += row;
        });

        countBadge.innerText = `${results.length} Vendors Active`;
        countBadge.className = 'badge bg-success';
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>